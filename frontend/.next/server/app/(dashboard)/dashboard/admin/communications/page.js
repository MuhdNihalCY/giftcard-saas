(()=>{var e={};e.id=193,e.ids=[193],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},14378:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>o}),r(44743),r(6989),r(35866),r(7957);var s=r(23191),a=r(88716),n=r(37922),i=r.n(n),l=r(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let o=["",{children:["(dashboard)",{children:["dashboard",{children:["admin",{children:["communications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,44743)),"/Users/nihal/Desktop/webworks/giftcard-saas/frontend/src/app/(dashboard)/dashboard/admin/communications/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,6989)),"/Users/nihal/Desktop/webworks/giftcard-saas/frontend/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,7957)),"/Users/nihal/Desktop/webworks/giftcard-saas/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/nihal/Desktop/webworks/giftcard-saas/frontend/src/app/(dashboard)/dashboard/admin/communications/page.tsx"],m="/(dashboard)/dashboard/admin/communications/page",u={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/dashboard/admin/communications/page",pathname:"/dashboard/admin/communications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},31831:(e,t,r)=>{Promise.resolve().then(r.bind(r,38913))},67126:(e,t,r)=>{Promise.resolve().then(r.bind(r,54681))},35047:(e,t,r)=>{"use strict";var s=r(77389);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},38913:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(10326),a=r(17577),n=r(47375),i=r(99837),l=r(89175),d=r(18069),o=r(58029);function c(){let{user:e}=(0,o.t)(),[t,r]=(0,a.useState)(!0),[c,m]=(0,a.useState)(!1),[u,x]=(0,a.useState)(null),[p,h]=(0,a.useState)(null),[f,g]=(0,a.useState)(null),b=async()=>{if(u)try{m(!0),h(null),g(null);let e=await d.Z.put("/admin/communication-settings",{emailEnabled:u.emailEnabled,smsEnabled:u.smsEnabled,otpEnabled:u.otpEnabled,pushEnabled:u.pushEnabled,emailRateLimit:u.emailRateLimit,smsRateLimit:u.smsRateLimit,otpRateLimit:u.otpRateLimit,otpExpiryMinutes:u.otpExpiryMinutes,otpLength:u.otpLength});x(e.data.data),g("Settings updated successfully!"),setTimeout(()=>g(null),3e3)}catch(e){h(e.response?.data?.message||"Failed to update settings")}finally{m(!1)}},y=(e,t)=>{u&&x({...u,[e]:t})};return t?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"text-center",children:"Loading settings..."})}):u?(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Communication Settings"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Manage global communication channel settings"})]}),p&&s.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:p}),f&&s.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg text-green-700",children:f}),(0,s.jsxs)("div",{className:"grid gap-6",children:[(0,s.jsxs)(n.Zb,{children:[s.jsx(n.Ol,{children:s.jsx(n.ll,{children:"Email Settings"})}),s.jsx(n.aY,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-900",children:"Enable Email Service"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Allow sending emails through the platform"})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:u.emailEnabled,onChange:e=>y("emailEnabled",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),u.emailEnabled&&s.jsx("div",{children:s.jsx(l.I,{label:"Rate Limit (per hour)",type:"number",min:"1",value:u.emailRateLimit,onChange:e=>y("emailRateLimit",parseInt(e.target.value))})})]})})]}),(0,s.jsxs)(n.Zb,{children:[s.jsx(n.Ol,{children:s.jsx(n.ll,{children:"SMS Settings"})}),s.jsx(n.aY,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-900",children:"Enable SMS Service"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Allow sending SMS messages through the platform"})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:u.smsEnabled,onChange:e=>y("smsEnabled",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),u.smsEnabled&&s.jsx("div",{children:s.jsx(l.I,{label:"Rate Limit (per hour)",type:"number",min:"1",value:u.smsRateLimit,onChange:e=>y("smsRateLimit",parseInt(e.target.value))})})]})})]}),(0,s.jsxs)(n.Zb,{children:[s.jsx(n.Ol,{children:s.jsx(n.ll,{children:"OTP Settings"})}),s.jsx(n.aY,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-900",children:"Enable OTP Service"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Allow generating and sending OTP codes"})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:u.otpEnabled,onChange:e=>y("otpEnabled",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),u.otpEnabled&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{children:s.jsx(l.I,{label:"Rate Limit (per hour per user)",type:"number",min:"1",value:u.otpRateLimit,onChange:e=>y("otpRateLimit",parseInt(e.target.value))})}),s.jsx("div",{children:s.jsx(l.I,{label:"OTP Length (digits)",type:"number",min:"4",max:"8",value:u.otpLength,onChange:e=>y("otpLength",parseInt(e.target.value))})}),s.jsx("div",{children:s.jsx(l.I,{label:"Expiry (minutes)",type:"number",min:"1",max:"60",value:u.otpExpiryMinutes,onChange:e=>y("otpExpiryMinutes",parseInt(e.target.value))})})]})]})})]}),(0,s.jsxs)(n.Zb,{children:[s.jsx(n.Ol,{children:s.jsx(n.ll,{children:"Push Notification Settings"})}),s.jsx(n.aY,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-900",children:"Enable Push Notifications"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Allow sending push notifications (coming soon)"})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:u.pushEnabled,onChange:e=>y("pushEnabled",e.target.checked),disabled:!0,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 opacity-50 cursor-not-allowed"})]})]})})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(i.z,{onClick:b,isLoading:c,disabled:c,children:"Save Settings"})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"text-center text-red-600",children:"Failed to load settings"})})}},54681:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(10326);r(17577);var a=r(35047),n=r(90434),i=r(58029),l=r(99837);function d({children:e}){let t=(0,a.useRouter)(),{user:r,isAuthenticated:d,clearAuth:o,checkAuth:c}=(0,i.t)();return d?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 text-gray-900",children:[s.jsx("nav",{className:"bg-white shadow-sm text-gray-900",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-8",children:[s.jsx(n.default,{href:"/dashboard",className:"text-xl font-bold text-primary-600",children:"\uD83C\uDF81 GiftCard SaaS"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[s.jsx(n.default,{href:"/dashboard",className:"text-gray-900 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium",children:"Dashboard"}),(r?.role==="ADMIN"||r?.role==="MERCHANT")&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(n.default,{href:"/dashboard/gift-cards",className:"text-gray-900 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium",children:"Gift Cards"}),s.jsx(n.default,{href:"/dashboard/templates",className:"text-gray-900 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium",children:"Templates"}),s.jsx(n.default,{href:"/dashboard/analytics",className:"text-gray-900 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium",children:"Analytics"}),s.jsx(n.default,{href:"/dashboard/reports/sales",className:"text-gray-900 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium",children:"Reports"}),s.jsx(n.default,{href:"/dashboard/redeem",className:"text-gray-900 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium",children:"Redeem"})]}),r?.role==="ADMIN"&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(n.default,{href:"/dashboard/users",className:"text-gray-900 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium",children:"Users"}),s.jsx(n.default,{href:"/dashboard/admin/communications",className:"text-gray-900 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium",children:"Communications"}),s.jsx(n.default,{href:"/dashboard/admin/communication-logs",className:"text-gray-900 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium",children:"Comm Logs"})]}),s.jsx(n.default,{href:"/dashboard/settings",className:"text-gray-900 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium",children:"Settings"}),s.jsx(n.default,{href:"/wallet",className:"text-gray-900 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium",children:"My Wallet"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-sm text-gray-900",children:r?.email}),s.jsx(l.z,{variant:"ghost",size:"sm",onClick:()=>{o(),t.push("/")},children:"Logout"})]})]})})}),s.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e})]}):null}},89175:(e,t,r)=>{"use strict";r.d(t,{I:()=>l});var s=r(10326),a=r(17577),n=r.n(a),i=r(51223);let l=n().forwardRef(({label:e,error:t,className:r,id:n,...l},d)=>{let o=(0,a.useId)(),c=n||o;return(0,s.jsxs)("div",{className:"w-full",children:[e&&s.jsx("label",{htmlFor:c,className:"block text-sm font-medium text-gray-900 mb-1",children:e}),s.jsx("input",{ref:d,id:c,className:(0,i.cn)("w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","text-gray-900 bg-white placeholder:text-gray-400",t?"border-red-500":"border-gray-300",r),...l}),t&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:t})]})});l.displayName="Input"},44743:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/Users/nihal/Desktop/webworks/giftcard-saas/frontend/src/app/(dashboard)/dashboard/admin/communications/page.tsx#default`)},6989:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/Users/nihal/Desktop/webworks/giftcard-saas/frontend/src/app/(dashboard)/layout.tsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[371,672,434,207,683],()=>r(14378));module.exports=s})();